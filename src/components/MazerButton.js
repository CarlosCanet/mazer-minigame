import React, { useEffect, useState } from 'react';
import { Button } from '@mui/material';
import "./MazerButton.css";

function MazerButton({ reset, onClicked, rowIndex, colIndex, isClickable, onHidden, error }) {
    const [icon, setIcon] = useState(newIcon());
    const [clicks, setClicks] = useState(0);

    const handleClick = () => {
        if (isClickable) {
            if (clicks === 0) {
                setIcon(newIcon());
            }
            setClicks(clicks + 1);
            if(clicks === 1){
                onHidden();
            }
        }
        onClicked(icon, rowIndex, colIndex);
    };

    useEffect(() => {
        if (reset) {
            setIcon(newIcon());
            setClicks(0);
        }
    }, [reset]);

    return (
        <Button
            variant="contained"
            className="mazer-button"
            style={{
                width: '100%',
                minHeight: '100%',
                aspectRatio: '1 / 1',
                backgroundColor: error? "#3a080a" : (clicks === 0) ? (isClickable ? '#3f675f' : '#064034') : (isClickable ? '#646366' : '#303233'),
                color: 'white',
                visibility: (clicks === 2) ? 'hidden' : 'visible',
            }}
            disabled={!isClickable}
            onClick={handleClick}
        >
            {icon === '8far' ? <MonkeyIcon /> : (icon === '8close' ? <PawIcon /> : <BearIcon />)}
        </Button>
    );
}

const widthIcon = "3em", heightIcon = "3em";

function newIcon() {
    const randomNumber = Math.floor(Math.random() * 3);

    // Determine the icon based on the random number
    switch (randomNumber) {
        case 0:
            return '8close';
        case 1:
            return '3far';
        default:
            return '8far';
    }
}

function MouseIcon() {
    return (
        <svg xmlns="http://www.w3.org/2000/svg" width={widthIcon} height={heightIcon} viewBox="0 0 24 24" style={{ transform: 'scaleX(-1)' }}>
            <path fill="currentColor" d="M21.33 17.39c1.4 1.27.47 3.61-1.41 3.61h-8.86A5.04 5.04 0 0 1 6 15.94v-.05c-2.3-.47-4-2.48-4-4.89c0-2.75 2.22-5 5-5h2.5c.3 0 .5-.23.5-.5S9.8 5 9.5 5H7V3h2.5C10.88 3 12 4.13 12 5.5C12 6.89 10.88 8 9.5 8H7c-1.66 0-3 1.33-3 3c0 1.37.92 2.5 2.14 2.87c.56-2.2 2.53-3.87 4.92-3.87c.8 0 1.6.22 2.3.55c-1.41.79-2.36 2.25-2.36 3.95c0 1.25.5 2.37 1.33 3.17l.7-.7c-.65-.61-1.03-1.5-1.03-2.47c0-2.59 2.34-3.5 3.5-3.5c2.08 0 3.95 1.89 3.44 4.23zM18 19c.56 0 1-.44 1-1s-.44-1-1-1s-1 .44-1 1s.44 1 1 1" />
        </svg>
    );
}

function BirdIcon() {
    return (
        <svg xmlns="http://www.w3.org/2000/svg" width={widthIcon} height={heightIcon} viewBox="0 0 24 24" style={{ transform: 'scaleX(-1)' }}>
            <g fill="currentColor" stroke="currentColor" strokeLinecap="round" strokeLinejoin="round" strokeWidth="2">
                <path d="M16 7h.01M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20" /><path d="m20 7l2 .5l-2 .5M10 18v3m4-3.25V21m-7-3a6 6 0 0 0 3.84-10.61" />
            </g>
        </svg>
    );
}

function FrogIcon() {
    return (
        <svg xmlns="http://www.w3.org/2000/svg" width={widthIcon} height={heightIcon} viewBox="0 0 512 512">
            <path fill="currentColor" d="M335.7 88.94c-4.742.194-9.563 1.486-14.204 4.165c-38.934 22.48-89.77 21.953-127.79.002c-6.09-3.516-12.285-4.61-18.145-3.892a46.38 46.38 0 0 1 9.438 28.09c0 23.15-17.037 42.83-39.176 45.095c-12.775 14.92-21.553 31.807-24.386 49.983c44.73-23.79 90.947-35.572 137.064-35.508c46.15.064 92.197 11.987 136.56 35.62c-2.69-18.15-11.216-35.043-23.794-49.92c-.585.026-1.17.048-1.76.048c-24.18 0-43.447-20.7-43.447-45.318c0-10.64 3.6-20.543 9.64-28.364zm-194.15 3.216c-12.67 0-23.277 10.85-23.277 25.15c0 14.297 10.608 25.147 23.278 25.147c12.67 0 23.276-10.85 23.276-25.148s-10.606-25.15-23.275-25.15zm227.956 0c-12.67 0-23.277 10.85-23.277 25.15c0 14.297 10.607 25.147 23.276 25.147c12.67 0 23.277-10.85 23.277-25.148s-10.608-25.15-23.277-25.15zm67.572 93.367c-8.525.088-17.893 1.546-27.853 4.243c6.926 19.457 8.57 40.725 2.695 62.656c-4.26 15.896.933 37.475 11.7 54.758l4.69 7.53l-7.02 5.43c-19.765 15.28-36.44 25.107-46.104 35.264c-9.664 10.158-13.887 19.59-10.915 40.875l1.525 10.91c3.596 4.7 7.678 9.43 12.142 14.06c19.876-14.55 36.01-23.887 68.344-4.094c-6.738-18.804 15.938-29.762 46.72-29.78c-36.91-15.88-64.98-25.62-86.438-30.376c67.492-72.188 97.182-127.96 66-159.188c-8.172-8.183-19.356-12.034-33.28-12.28a80.764 80.764 0 0 0-2.204-.01zm-361.617.002a79.679 79.679 0 0 0-2.397.006c-13.925.248-25.14 4.1-33.313 12.282c-31.182 31.227-1.492 87 66 159.188c-21.456 4.756-49.528 14.497-86.438 30.375c30.782.02 53.458 10.977 46.72 29.78c32.332-19.792 48.468-10.454 68.343 4.095c6.713-6.962 12.572-14.146 17.188-21.12l.537-3.85c2.972-21.283-1.25-30.716-10.914-40.874c-9.664-10.157-26.34-19.984-46.106-35.265l-7.02-5.427l4.692-7.53c10.73-17.228 15.858-39.233 11.7-54.76c-5.782-21.572-4.185-42.44 2.536-61.56c-11.336-3.388-21.954-5.216-31.527-5.338zm183.038 9.66c-46.096-.065-92.3 12.827-137.574 38.846a87.261 87.261 0 0 0 2.494 13.31v.002c5.453 20.354.593 42.93-9.484 62.297c15.89 11.634 30.343 20.526 41.478 32.23c10.36 10.89 16.795 25.132 16.955 43.712c-1.096 16.308-9.157 39.273-22.347 59.244c24.59-14.237 42.134-15.333 45.29 3.492c14.097-17.783 25.698-20.386 38.985-8.035c-3.745-31.452-11.117-52.887-17.258-65.097c-14.896-36.567-42.816-61.484-73.742-83.424l11.36-16.014c38.788 27.517 76.798 62.663 89.124 119.566c9.628.705 19.25.65 28.85-.16c12.362-56.81 50.334-91.918 89.085-119.408l11.36 16.016c-31.19 22.127-59.333 47.28-74.13 84.363c-6.045 12.357-13.14 33.493-16.793 64.158c13.29-12.35 24.89-9.748 38.987 8.035c3.153-18.825 20.697-17.73 45.288-3.492c-13.51-20.455-21.645-44.058-22.42-60.424c.415-18.01 6.81-31.872 16.95-42.533c11.135-11.705 25.586-20.595 41.474-32.23c-10.064-19.29-14.99-41.736-9.48-62.302a88.613 88.613 0 0 0 2.51-13.266c-44.85-25.79-90.852-38.82-136.964-38.886z" />
        </svg>
    );
}

function PawIcon() {
    return (
        <svg viewBox="0 0 512 512" fill="#03f9bf" height={heightIcon} width={widthIcon} >
            <path d="M226.5 92.9c14.3 42.9-.3 86.2-32.6 96.8s-70.1-15.6-84.4-58.5.3-86.2 32.6-96.8 70.1 15.6 84.4 58.5zM100.4 198.6c18.9 32.4 14.3 70.1-10.2 84.1s-59.7-.9-78.5-33.3-14.4-70.1 10.1-84.1 59.7.9 78.5 33.3zM69.2 401.2C121.6 259.9 214.7 224 256 224s134.4 35.9 186.8 177.2c3.6 9.7 5.2 20.1 5.2 30.5v1.6c0 25.8-20.9 46.7-46.7 46.7-11.5 0-22.9-1.4-34-4.2l-88-22c-15.3-3.8-31.3-3.8-46.6 0l-88 22c-11.1 2.8-22.5 4.2-34 4.2-25.8 0-46.7-20.9-46.7-46.7v-1.6c0-10.4 1.6-20.8 5.2-30.5zm352.6-118.5c-24.5-14-29.1-51.7-10.2-84.1s54-47.3 78.5-33.3 29.1 51.7 10.2 84.1-54 47.3-78.5 33.3zm-111.7-93c-32.3-10.6-46.9-53.9-32.6-96.8s52.1-69.1 84.4-58.5 46.9 53.9 32.6 96.8-52.1 69.1-84.4 58.5z" />
        </svg>
    );
}

function MonkeyIcon() {
    return (
        <svg fill="#03f9bf" height={heightIcon} width={widthIcon} version="1.1" id="Layer_1" viewBox="0 0 296.999 296.999">
            <g>
                <g>
                    <g>
                        <path d="M148.5,171.704c-25.762,0-48.683,31.175-48.683,55.749c0,22.947,21.839,41.617,48.683,41.617s48.683-18.67,48.683-41.617 C197.183,202.879,174.262,171.704,148.5,171.704z M121.195,197.929c1.05-4.201,5.303-6.754,9.51-5.704l6.851,1.713 c4.201,1.051,6.755,5.309,5.704,9.51c-0.891,3.562-4.088,5.941-7.601,5.941c-0.63,0-1.269-0.077-1.909-0.236l-6.851-1.713 C122.698,206.388,120.144,202.13,121.195,197.929z M162.631,256.491h-28.263c-4.33,0-7.842-3.511-7.842-7.842 c0-4.33,3.511-7.842,7.842-7.842h6.29v-20.421c0-4.33,3.511-7.842,7.842-7.842s7.842,3.511,7.842,7.842v20.421h6.29 c4.33,0,7.842,3.511,7.842,7.842C170.473,252.98,166.962,256.491,162.631,256.491z M170.101,207.439l-6.851,1.713 c-0.638,0.16-1.279,0.236-1.909,0.236c-3.514,0-6.71-2.378-7.601-5.941c-1.051-4.201,1.503-8.459,5.704-9.51l6.851-1.713 c4.202-1.049,8.459,1.503,9.51,5.704C176.856,202.13,174.302,206.388,170.101,207.439z"/>
                        <path d="M225.445,135.599c0-19.052-15.5-34.552-34.552-34.552s-34.552,15.5-34.552,34.552c0,4.33-3.511,7.842-7.842,7.842 s-7.842-3.511-7.842-7.842c0-19.052-15.5-34.552-34.552-34.552s-34.552,15.5-34.552,34.552c0,9.292,4.327,18.242,9.803,29.572 c3.901,8.07,8.369,17.34,12.141,28.611c2.542-4.661,5.543-9.161,8.967-13.339c12.906-15.749,29.255-24.423,46.035-24.423 c16.78,0,33.128,8.673,46.035,24.423c3.424,4.179,6.425,8.678,8.967,13.339c3.771-11.271,8.24-20.541,12.141-28.611 C221.119,153.841,225.445,144.891,225.445,135.599z M111.652,141.145c-1.461,1.46-3.48,2.294-5.548,2.294 c-2.059,0-4.078-0.834-5.548-2.294c-1.451-1.461-2.294-3.48-2.294-5.548c0-2.059,0.842-4.078,2.294-5.548 c1.47-1.451,3.489-2.294,5.548-2.294c2.068,0,4.087,0.842,5.548,2.294c1.46,1.47,2.294,3.489,2.294,5.548 C113.945,137.664,113.112,139.684,111.652,141.145z M196.439,141.145c-1.461,1.46-3.48,2.294-5.548,2.294 c-2.059,0-4.078-0.834-5.538-2.294c-1.461-1.461-2.303-3.48-2.303-5.548c0-2.059,0.842-4.078,2.303-5.548 c1.461-1.451,3.48-2.294,5.538-2.294c2.068,0,4.087,0.842,5.548,2.294c1.46,1.47,2.294,3.489,2.294,5.548 C198.732,137.664,197.898,139.684,196.439,141.145z" />
                        <path d="M286.328,118.57c-6.972-7.006-16.257-10.864-26.142-10.864c-0.344,0-0.689,0.005-1.037,0.015 c-7.372-22.119-21.537-41.926-40.204-56.105c-20.4-15.497-44.76-23.688-70.445-23.688s-50.045,8.191-70.447,23.688 C59.385,65.794,45.22,85.602,37.849,107.721c-0.347-0.011-0.693-0.015-1.037-0.015c-9.885,0-19.169,3.858-26.142,10.864 C3.744,125.528-0.046,134.75,0,144.54c0.177,37.259,32.537,68.699,52.768,68.699c0.503,0,1-0.026,1.493-0.078 c8.748,11.974,19.873,22.338,32.417,30.206c-1.645-5.057-2.545-10.392-2.545-15.915c0.001-1.673,0.233-3.74,0.176-5.464 c-0.715-21.811-10.712-36.834-17.072-49.99c-6.098-12.618-11.366-23.515-11.366-36.398c0-27.7,22.535-50.235,50.235-50.235 c17.8,0,33.468,9.306,42.393,23.309c8.925-14.003,24.593-23.309,42.393-23.309c27.7,0,50.235,22.535,50.235,50.235 c0,12.883-5.268,23.78-11.366,36.398c-6.36,13.156-16.356,28.181-17.072,49.992c-0.057,1.723,0.176,3.79,0.176,5.463 c0,5.523-0.9,10.86-2.546,15.917c12.543-7.869,23.671-18.235,32.418-30.208c0.493,0.052,0.991,0.078,1.493,0.078 c20.231,0,52.592-31.44,52.768-68.699C297.044,134.751,293.254,125.529,286.328,118.57z" />
                    </g>
                </g>
            </g>
        </svg>
    );
}

function BearIcon() {
    return (
        <svg fill="#03f9bf" version="1.1" id="Layer_1" width={widthIcon} height={heightIcon} viewBox="0 0 585.225 585.225">
            <g>
                <g id="Layer_1_134_">
                    <g>
                        <path d="M489.6,36.975c-44.625,0-81.6,30.6-90.525,71.4H183.6c-10.2-40.8-47.175-71.4-90.525-71.4 C42.075,36.975,0,79.049,0,130.049c0,35.7,20.4,67.575,51,82.875V313.65c0,130.049,112.2,234.6,242.25,234.6 c130.051,0,242.25-104.551,242.25-234.6V212.924c29.324-15.3,49.725-47.175,49.725-82.875 C583.949,79.049,541.875,36.975,489.6,36.975z M169.575,229.5c0-14.025,11.475-26.775,26.775-26.775s26.775,11.475,26.775,26.775 s-11.475,26.775-26.775,26.775S169.575,244.799,169.575,229.5z M290.7,502.35c-48.45,0-89.25-52.275-89.25-116.025 s39.525-116.025,89.25-116.025c49.726,0,89.249,52.275,89.249,116.025S340.426,502.35,290.7,502.35z M386.324,256.274 c-15.299,0-26.773-11.475-26.773-26.775c0-14.025,11.475-26.775,26.773-26.775c14.025,0,26.775,11.475,26.775,26.775 S401.625,256.274,386.324,256.274z" />
                        <path d="M244.8,337.875c-7.65,0-15.3,3.824-17.85,10.199c-2.55,7.65-1.275,15.301,3.825,20.4l45.9,45.9 c7.65,7.65,20.399,7.65,28.049,0l45.9-45.9c5.1-5.1,7.65-12.75,3.824-20.4c-2.549-7.65-10.199-10.199-17.85-10.199H244.8z" />
                    </g>
                </g>
            </g>
        </svg>
    );
}

export default MazerButton;